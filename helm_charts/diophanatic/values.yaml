# Default values for diophanatic.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicas: 3
version: "latest"


# diophanatic-webapp
diophanatic_webapp_image:
  repository: toonarmycaptain/diophanatic-webapp
  version: latest
  pullPolicy: Always
  # Overrides the image tag whose default is the chart appVersion.
  tag: "latest"
  port: 80
  namespace: diophanatic
  namespaceOverride: diophanatic
  metadata:
    name: diophanatic-webapp
    labels:
      app: diophanatic-webapp
    annotations:
      prometheus.io/scrape: "true"
      prometheus.io/path: /metrics
      prometheus.io/port: http #80 #'80'
autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 5

kube-prometheus-stack:
  namespace: monitoring
  namespaceOverride: monitoring
  prometheus:
    ingress:
      ## If true, Prometheus server Ingress will be created
      ##
      enabled: true

      ## Prometheus server Ingress hostnames
      ## Must be provided if Ingress is enabled
      ##
      hosts:
        - prometheus-1.vmtest.io # Testing url.
      paths:
      - /*  # Needed to avoid 'response 404 (backend NotFound), service rules for the path non-existent' at least on GCP
    prometheusSpec:
      scrape_configs:
        - job_name: diophanatic-webapp-service-scrape
          static_configs:
            - targets: [‘diophanatic-webapp-service:80’]
        - job_name: diophanatic-webapp-scrape
          static_configs:
            - targets: [ ‘diophanatic-webapp:80’ ]
